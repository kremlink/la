@include exports("@path:components\_ep2.scss"){/*@path:components\_ep2.scss*/
  .ov-wrap{
    &.vibrate{
      &.v3{
        .pulse-btn{
          width:11.25%;
          cursor:pointer;
          position:absolute;
          &.corr{
            left:10%;
            top:10%;
          }
          &.incorr{
            left:30%;
            top:10%;
            &+.incorr{
              left:50%;
              top:10%;
            }
          }
          &.shifted{
            &.corr{
              top:50%;
            }
            &.incorr{
              top:50%;
            }
          }
          img{
            width:100%;
          }
        }
      }
    }
    &.simple{
      .pulse-btn{
        cursor:pointer;
        @include abs($l:20%,$t:20%);
        width:20%;
        &:nth-child(2){
          left:40%;
          top:40%;
        }
        &:nth-child(3){
          left:60%;
          top:60%;
        }
        img{
          width:100%;
        }
      }
      .w-p-outer{
        transition-delay:$anim*5;
        @include anim('w-rotate-both 20s ease-in-out infinite');
      }
      .pulse-btn.start{
        transition-delay:$anim*5;
      }
      .w-p-cont{
        @include anim('w-move-both 20s infinite');
      }
    }
    &.cartogr{
      @extend %text-btn;
      &.shown{
        .cartogr-block{
          opacity:1;
          visibility:visible;
        }
      }
      &.ok{
        .wobble-pop{
          pointer-events:none;
        }
        .w-p-outer,.pulse-btn.start{
          opacity:0;
          transition-delay:0s;
          transition-duration:$anim;
          pointer-events:none;
        }
        .next,.g-m{
          opacity:1;
        }
        .bg:nth-child(2){
          opacity:1;
        }
      }
      &.done{
        .cartogr-block:after{
          opacity:.5;
        }
        .wobble-pop{
          pointer-events:auto;
        }
        .w-p-outer,.pulse-btn.start{
          opacity:1;
          transition-delay:0s;
          transition-duration:$anim;
          pointer-events:auto;
        }
        .w-p-t-ov div{
          &:nth-child(1){
            display:none;
          }
          &:nth-child(2){
            display:block;
          }
        }
      }
      .w-p-outer{
        transition-delay:$anim*5;
        @include anim('w-rotate-both 20s ease-in-out infinite');
      }
      .w-p-cont{
        @include anim('w-move-both 20s infinite');
      }
      .pulse-btn{
        transition-delay:$anim*5;
      }
      .w-p-t-ov div:nth-child(2){
        display:none;
      }
    }
    &.forest{
      @extend %text-btn;
      &.shown{
        .w-p-outer{
          top:15%;
        }
      }
      &.ok{
        .forest-block{
          opacity:1;
          visibility:visible;
        }
        .wobble-pop{
          pointer-events:none;
        }
        .w-p-outer,.pulse-btn.start{
          opacity:0;
          transition-delay:0s;
          transition-duration:$anim;
          pointer-events:none;
        }
      }
      .w-p-outer{
        transition-delay:$anim*5;
        @include anim('w-rotate-both 20s ease-in-out infinite');
      }
      .w-p-cont{
        @include anim('w-move-both 20s infinite');
      }
      .w-p-text{
        height:17.04em;
      }
      .w-p-t-ov{
        right:11.36%;
        svg{
          display:block;
          margin:1.5em auto 0 auto;
          width:100%;
          height:5em;
        }
      }
      .pulse-btn{
        transition-delay:$anim*5;
      }
    }
  }
  //---
  .forest-block{
    @include abs($l:10%,$t:4.07%,$r:10%,$b:4.07%);
    visibility:hidden;
    opacity:0;
    transform:scale(.88);
    @include trs('opacity #{$anim} ease-in-out');
    .g-item{
      position:absolute;
      opacity:0;
      @include trs('opacity #{$anim} ease-in-out');
      &.ini{
        opacity:1;
      }
      &.active{
        cursor:pointer;
        filter:grayscale(1);
        &:hover svg{
          opacity:1;
        }
      }
      &.done{
        filter:brightness(50%);
        img{
          bottom:-15%;
        }
        .arr{
          display:none;
        }
      }
      img{
        @include abs($b:-9.05%);
        width:100%;
        pointer-events:none;
        @include trs('bottom #{$anim} ease-in-out');
      }
      svg{
        position:absolute;
        width:100%;
        height:100%;
        opacity:0;
        //@include trs('opacity #{$anim} ease-in-out');
      }
    }
    .arr{

    }
    .g-hor{
      @include abs($l:0);
      width:100%;
      height:1px;
    }
    .g-ver{
      @include abs($t:0);
      height:100%;
      width:1px;
    }
  }

  @include kfs(cartogr-item){
    50%{
      opacity:1;
    }
    100%{
      opacity:0;
    }
  };

  .cartogr-block{
    position:absolute;
    width:100%;
    height:100%;
    opacity:0;
    overflow:hidden;
    visibility:hidden;
    @include trs('opacity #{$anim*2} ease-in-out');
    &:after{
      content:'';
      pointer-events:none;
      @include abs($l:0,$r:0,$t:0,$b:0);
      background:#000;
      opacity:0;
      @include trs('opacity #{$anim} ease-in-out');
    }
    .grid{
      @include abs($t:-3.3%,$b:-3.3%,$l:0,$r:0);
    }
    .next{
      @include abs($r:0,$b:0);
      width:14em;
      height:14em;
      opacity:0;
      @include trs('opacity #{$anim*2} ease-in-out #{$anim*2}');
      img{
        width:100%;
        position:absolute;
        opacity:0;
        @include trs('opacity #{$anim} ease-in-out');
        &.active{
          opacity:1;
        }
      }
    }
    .bg:nth-child(2){
      opacity:0;
      @include trs('opacity #{$anim*2} ease-in-out');
    }
    svg{
      position:absolute;
      width:100%;
      height:100%;
    }
    .g-item{
      position:absolute;
      &.active:not(.done){
        cursor:pointer;
        &:hover:after{
          opacity:1;
        }
      }
      &.done{
        img:nth-child(3){
          @include trs('opacity #{$anim} ease-in-out');
          opacity:1;
        }
      }
      &.good img:nth-child(1){
        //animation:cartogr-item 1.5s linear;
      }
      &.bad img:nth-child(2){
        animation:cartogr-item .5s linear;
      }
      &:after{
        content:'';
        @include abs($l:0,$r:0,$t:0,$b:0);
        border:1px solid #fff;
        background:rgba(#fff,.15);
        opacity:0;
        @include trs('opacity #{$anim/2} ease-in-out');
      }
      img{
        position:absolute;
        width:100%;
        opacity:0;
      }
    }
    .g-m{
      transform:translate(-50%,-50%);
      font-size:.5em;
      position:absolute;
      width:3em;
      height:1.5em;
      line-height:1.5em;
      background:#2c2c30;
      color:#a5a5ac;
      text-align:center;
      font-weight:700;
      opacity:0;
      pointer-events:none;
      @include trs('opacity #{$anim} ease-in-out');
      &.hidden{
        display:none;
      }
    }
    .n-h{
      font-weight:700;
      text-transform:uppercase;
      color:#fff;
      white-space:nowrap;
      @include abs($l:1.7em,$t:-1em);
    }
  }
}